<tool id="new.galaxy.qc" name="Quality Checks" version="0.1.0">
  <description>Extract run information from tools used in pipeline.</description>
  <command>R --vanilla --file=$__tool_directory__/new.galaxy.qc.R
      --args $input_fastq $spike_counts $despiked $count_output      <!--Count and Remove Spikes-->
             $align_reports $align_output                            <!--MiXCR Align-->
             $assemble_reports $assemble_output                      <!--MiXCR Assemble-->
             $raw_clones $norm_clones $norm_output                   <!--Normalization-->
  </command>

  <inputs>
    <!--Count and Remove Spikes-->
    <param name="input_fastq" type="data" multiple="True" format="fastq" label="PEARed Fastq" help="Data collection of PEARed
												      fastq files, for count
												      spikes QC."/>
    <param name="spike_counts" type="data" label="Spike Counts" multiple="True" help="Data collection of 25-bp spike count files,
										      for count spikes QC."/>
    <param name="despiked" type="data" format="fastq" multiple="True" label="Despiked Fastq" help="Data collection of PEARed fastq
												   files, with spiked reads
												   identified by 9-bp count spikes
												   removed. For count spikes QC."/>
    <!--MiXCR Align-->
    <param name="align_reports" type="data" multiple="True" label="Align Report" help="Data collection of report files generated
										       by MiXCR Align."/>
    <!--MiXCR Assemble-->
    <param name="assemble_reports" type="data" multiple="True" label="Assemble Report" help="Data collection of report files
											     generated by MiXCR Assemble."/>
    <!--Normalization-->
    <param name="raw_clones" type="data" multiple="True" label="Raw Clonotype Counts" help="Data collection of clonotype count
											    files generated by exportClones.
											    For normalization QC."/>
    <param name="norm_clones" type="data" multiple="True" label="Normalized Clonotype Counts" help="Data collection of normalized
												    clonotype count files. Generated
												    by exportClones, with counts
												    normalized using scaling
												    factor."/>
  </inputs>

  <outputs>
    <!--Count and Remove Spikes-->
    <data name="count_output" type="tabular" label="Count Spikes QC"/>
    <!--MiXCR Align-->
    <data name="align_output" type="tabular" label="MiXCR Align QC"/>
    <!--MiXCR Assemble-->
    <data name="assemble_output" type="tabular" label="MiXCR Assemble QC"/>
    <!--Normalization-->
    <data name="norm_output" type="tabular" label="Normalization QC"/>
  </outputs>

  <help>
    This tool calculates various QC metrics for count/remove spikes, mixcr align, mixcr assemble, and normalization. Figure out how to format help better and make this more specific.
  </help>

</tool>
